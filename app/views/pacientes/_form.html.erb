<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>


<style type="text/css">
      body {background: #ccc;
    font-family: sans-serif;
      padding:7%;
    }
     
input {margin-bottom: 10px;}
#signup label.error {
  font-size: 0.8em;
  color: #F00;
  font-weight: bold;
  display: block;
    margin-bottom: 10px;
}
#signup  input.error, #signup select.error  {
  background: #FFA9B8;
  border: 1px solid red;
}
</style>
<script type="text/javascript">
   
$(document).ready(function() {
 $('#signup').validate({
   
   rules: {
     email: {
        required: true,
        email: true
     },
     password: {
        required: true,
        rangelength:[8,16]
     },
     confirm_password: {equalTo:'#password'},
     spam: "required"
   }, //end rules
   messages: {
      email: {
         required: "Please supply an e-mail address.",
         email: "This is not a valid email address."
       },
      password: {
        required: 'Please type a password',
        rangelength: 'Password must be between 8 and 16 characters long.'
      },
      confirm_password: {
        equalTo: 'The two passwords do not match.'
      }
   },
   errorPlacement: function(error, element) { 
       if ( element.is(":radio") || element.is(":checkbox")) {
          error.appendTo( element.parent()); 
        } else {
          error.insertAfter(element);
        } 
    } 

  }); // end validate 
}); // end ready
</script>




















    















<div class="container-fluid">    
        
    <div id="loginbox" style = "margin-top: 30px;" class="mainbox col-md-12 col-sm-12"> 
        

        

      <style type="text/css">
      @import url(https://fonts.googleapis.com/css?family=Roboto);
      @import url(https://fonts.googleapis.com/css?family=Montserrat);
      .panel-heading {
          background-image: none;
          background-color: #ECECEC;
          color: #5bc0de;
          font-family: 'Roboto', sans-serif;
      }

        .panel-title{
          font-size: 30px;   
        }
        .pie_form{
          background-image: none;
          background-color: #ECECEC;
          color: white;   
        }
        .line1
        {
          display: inline-block;
          width: 30% !important;
        }

      </style>













    <div class="container-fluid navbar navbar-default" style = "margin-bottom:0px!importan">
      <div class="row">
<%= simple_form_for([@paciente], :html => { :id => "signup" }) do |f| %>



  <% if @paciente.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@paciente.errors.count, "error") %> prohibited this pet from being saved:</h2>

      <ul>
      <% @paciente.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

































<div class="container" style="margin-top:10px; margin-bottom:-8px; text-align: left;
    margin-left: 0px!important;">
        <div class="centered title"><h1 style=" font-size:25px; text-align: left;color: #22BDC8;">  <%= link_to "Regresar", root_path, :class=>"btn btn-info color_blanco mrg" %><br><br><span style = "margin-right:10px;color: #22BDC8;"class="glyphicon glyphicon-list-alt"></span> Datos Paciente</h1></div>
     </div>








     
     <hr class="featurette-divider"></hr>


                <div class="row">
                  <div class="col-md-3">
                    <label class="label">Primer Nombre</label>
                    <div class="form-group">

                      <%= f.text_field :primer_nombre, class: "form-control trs1 required", :title => "Es un Campo Obligatorio", id: '1name'  %>
                    </div>
                  </div>

                  <div class="col-md-3">
                    <label class="label">Segundo Nombre</label>
                    <div class="form-group">
                      <%= f.text_field :segundo_nombre, class: "form-control trs2 ", id: '2name' %>
                    </div>
                  </div>


                  <div class="col-md-3">
                    <label class="label">Primer Apellido</label>
                    <div class="form-group">

                      <%= f.text_field :primer_apellido, class: "form-control trs3 required", :title => "Es un Campo Obligatorio", id: '1surname' %>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label class="label">Segundo Apellido</label>
                    <div class="form-group">
                      <%= f.text_field :segundo_apellido, class: "form-control trs4", id: '2surname' %>
                    </div>
                  </div>

               </div>



  

                <div class="row sir">

                  <div class="col-md-4">
                    <label class="label">Email</label>
                    <div class="form-group">
                      <%= f.text_field :email, class: 'form-control', :value => 'no aplica' %>



                    </div>
                  </div>
  
     
                  <div class="col-md-4">
                    <label class="label">Tipo Documento</label>
                    <div class="form-group">


                      <%= f.input :tipo_documento,
                          prompt:       'Seleccionar',
                          collection: @paciente.select_documento.sort,
                          error: false, label: false, 
                          input_html:   {class: 'form-control fontf required', :title => "Es un Campo Obligatorio"}, :selected => '1' %>



                    </div>
                  </div>

                  <div class="col-md-4">
                    <label class="label">Documento</label>
                    <div class="form-group">
                        <%= f.text_field :documento, class: "form-control required",  id: 'document', :title => "Es un Campo Obligatorio"  %>
                    </div>
                  </div>  



                  <div class="col-md-4 sir">
                    <label class="label">Genero</label>
                    <div class="form-group">
                      <%= f.input :genero,
                              prompt:       'Seleccionar',
                              collection: @paciente.select_genero.sort,
                              error: false, label: false, 
                              input_html:   {class: 'form-control required', :title => "Es un Campo Obligatorio" }  %>

                    </div>
                  </div>
              

                <div class="col-md-4 sir">
                  <label class="label">Fecha de Nacimiento</label>
                    <div class="form-group">
                      <%= f.date_select :fecha_nacimiento,{
                        :start_year => Time.now.year,
                        :end_year => 1900,
                        :use_month_names => ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre','Diciembre'],
                        :use_short_month => true,
                        :order => [:day, :month, :year],
                        :prompt => {:month => 'Mes', :day => 'Dia', :year => 'AÃ±o'}},
                        {:class => 'year form-control line1 required',
                        :id => 'user_birthday' , :title => "Es un Campo Obligatorio" }
                      %>                             
                    </div>
                </div>




                  <div class="col-md-4 sir">
                    <label class="label">Tipo Sanguineo</label>
                    <div class="form-group">
                      <%= f.input :tipo_sangre,
                          prompt:       'Seleccionar',
                          collection: @paciente.select_sangre.sort,
                          error: false, label: false, 
                          input_html:   {class: 'form-control fontf required', :title => "Es un Campo Obligatorio"} %>
                    </div>
                  </div>


                </div>

                <div class="row sir">
                  

                  <div class="col-md-4">
                    <label class="label">Profesion</label>
                    <div class="form-group">
     

                        <%= f.text_field :profesion, class: "form-control ",  id: 'document', :value => 'no aplica'  %>



                    </div>
                  </div>

                  <div class="col-md-4">
                    <label class="label">Direccion</label>
                    <div class="form-group">
                      <%= f.text_field :direccion, class: 'form-control fontf required', :title => "Es un Campo Obligatorio" %>
                    </div>
                  </div>

                                
                <div class="col-md-4">
                  <div class="form-group">
                  <label class="label">Nacionalidad</label>

                        <%= f.country_select :nacionalidad, {object: f.object,:selected => 'CO'  }, class: 'form-control required error', :title => "Es un Campo Obligatorio" %>


                      <%= f.hidden_field :user_id, :value => current_user.id %>
                  </div>
                </div>

              </div>




<script type="text/javascript">
function changeddl($this)
{
    if($this.value!="")
    {
      $('.new_city').removeClass('required');
      $('.new_city').removeClass('error');
      $('.new_city-error').hide();
      $('#paciente_ciudad_attributes_nombre-error').hide();
    }
}
</script>

              <div class="row sir">

                <div class="col-md-4">
                  <label class="label">Ciudad</label>
                  <div class="form-group">
                    <%= f.collection_select :ciudad_id, Ciudad.all, :id, :nombre, {prompt: "Seleccionar"}, {class: "form-control city", :onchange => 'changeddl(this)'}  %>
                  </div>
                </div>




    <div id="dvPassport">

        <%= f.simple_fields_for :ciudad do |builder| %>
    <%#= builder.label :account_type %>

        <div class="col-md-4">
    <label for="chkPassport">
       La Ciudad no esta registrada?
    </label>          <div class="form-group">
            <%= builder.text_field :nombre, class: 'form-control required new_city', :title => "Es un Campo Obligatorio" %>
          </div>
        </div>



    <%#= builder.label :account_number %>
    <% end %>


    </div>





              </div>

      <%= f.hidden_field :nombre_completo, class: "form-control", id: 'nombre_completo' %>



<script type="text/javascript">
  $('#1name, #2name, #1surname, #2surname').bind('keypress blur', function() {   
    $('#nombre_completo').val($('#1name').val() + ' ' +
                             $('#2name').val() + ' '+
                             $('#1surname').val() + ' '+
                             $('#2surname').val());
});
</script>


               <div class="well pie_form">
                <div class="form-actions"  style = "text-align:center!important"> 
                    
                       
                        <button type="reset" class="btn btn btn-info custom" style = "margin-right:20px;">Borrar</button>
                        <%= f.submit "Guardar", :class => 'btn btn btn-info custom ' %>
                    
                </div>
              </div>
            <% end %>


        </div>

      </div>

       
       

    </div>
  </div>
</div>



   






<script type="text/javascript">


// Seleccionar una ciudad sin registrar una nueva
$('.city').change(function(e) {
  if ($(this).prop("selectedIndex") != 0)
    {
        $('#chkPassport').prop('disabled', true);  
    }
    else
    {
        $('#chkPassport').prop('disabled', false);
    }
});

// Mostrar el Checkbox para agregar


    $(function () {
        $("#chkPassport").click(function () {
            if ($(this).is(":checked")) {
                $(".city").prop('disabled', true);              
                $("#dvPassport").show();
            } else {
                $(".city").prop('disabled', false);                            
                $("#dvPassport").hide();
            }
        });
    });
</script>